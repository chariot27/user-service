spring.application.name=user-service

# --- Banco (PostgreSQL) ---
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}

# --- CDN (Bunny) ---
# Base do Storage API (fixa)
bunny.storage.base-url=${CDN_URI:https://br.storage.bunnycdn.com}
# Nome do Storage Zone
bunny.storage.zone-name=${CDN_ZONE_NAME}
# AccessKey do Storage (corrigido: access-key)
bunny.storage.access-key=${CDN_ACCESS_KEY}
# Prefixo de pasta (sem chaves; com default "users")
bunny.storage.folder-prefix=${CDN_PREFIX:users}
# Hostname público da Pull Zone
bunny.cdn.base-url=${PUB_URI}
bunny.storage.fail-hard=false

# Hibernate/JPA: cria/atualiza tabelas automaticamente (ok para dev/staging)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Em alguns ambientes (PostgreSQL + LOB) evita warnings/erros
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# (opcional) se você usa schema diferente de "public", descomente:
# spring.jpa.properties.hibernate.default_schema=public

# Recomenda-se desligar Open-Session-In-View
spring.jpa.open-in-view=false

# Porta do serviço
server.port=${SERVER_PORT:8081}

# Recursos estáticos (irrelevante aqui, mas OK)
spring.web.resources.add-mappings=true

# --- Logs um pouco mais verbosos no start (opcional) ---
logging.level.org.hibernate.SQL=debug
logging.level.org.hibernate.type.descriptor.sql=trace
